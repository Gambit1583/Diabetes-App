{% extends "base.html" %} 
{% load static %} 
{% block content %} 
<div class="container mt-4"> 
    <div class="row justify-content-center"> 
        <div class="col-md-10"> 
            <div class="card mb-4"> 
            <img class="card-img-top" src="{% if post.featured_image and post.featured_image.name %}{{ post.featured_image.url }}{% else %}{% static 'images/default.jpg.webp' %}{% endif %}" alt="{{ post.title }}"> 
            <div class="card-body"> 
                <h1 class="card-title">{{ post.title }}</h1> 
                <p class="text-muted">By {{ post.author }} | {{ post.created_on }}</p> 
                <hr /> 
                <p class="card-text">{{ post.content }}</p>
                <div class="voting"> 
                    <!-- button for upvoting/downvoting posts -->
                    <button class="upvote" data-post-id="{{ post.id }}"> 
                        üëç <span id="upvotes-{{ post.id }}">{{ post.upvotes_count }}</span> 
                    </button> <button class="downvote" data-post-id="{{ post.id }}"> 
                        üëé <span id="downvotes-{{ post.id }}">{{ post.downvotes_count }}</span> 
                    </button> 
                </div>
            </div> 
            </div> 
        </div> 
    </div> 
</div>

<!-- Adds Comments section to browser -->

<div class="container mt-4">
    <h3>Comments</h3>
    {% for comment in comments %}
    <div class="comment">
        <p>{{ comment.content }}</p>
        <p class="text-muted">By {{ comment.author }} | {{ comment.created_on }}</p>
    </div>
    {% empty %}
    <p>No comments yet. Be the first to comment!</p>
    {% endfor %}

    <h4>Add a comment</h4>
    <form method="post" action="{% url 'blog_detail' post.slug %}">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
</div>


{% endblock %}
